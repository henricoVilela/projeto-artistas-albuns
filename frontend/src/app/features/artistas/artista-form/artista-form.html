<app-layout>
    <div class="max-w-2'xl mx-auto space-y-6">
    <!-- Header -->
    <div class="flex items-center gap-4">
        <a routerLink="/artistas" class="text-gray-500 hover:text-gray-700">
        ← Voltar
        </a>
        <h1 class="text-2xl font-bold text-gray-900">
        {{ isEditing() ? 'Editar Artista' : 'Novo Artista' }}
        </h1>
    </div>
    
    @if (loadingData()) {
        <app-loading [fullPage]="true" text="Carregando..." />
    } @else {
        <div class="card card-body">
        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-6">
            <!-- Nome -->
            <div>
            <label for="nome" class="label">Nome *</label>
            <input
                type="text"
                id="nome"
                formControlName="nome"
                class="input"
                [class.input-error]="isFieldInvalid('nome')"
                placeholder="Nome do artista"
            />
            @if (isFieldInvalid('nome')) {
                <p class="error-message">Nome é obrigatório (2-200 caracteres)</p>
            }
            </div>
            
            <!-- Tipo -->
            <div>
            <label for="tipo" class="label">Tipo *</label>
            <select
                id="tipo"
                formControlName="tipo"
                class="input"
                [class.input-error]="isFieldInvalid('tipo')"
            >
                <option value="">Selecione o tipo</option>
                @for (tipo of tiposArtista; track tipo.value) {
                <option [value]="tipo.value">{{ tipo.label }}</option>
                }
            </select>
            @if (isFieldInvalid('tipo')) {
                <p class="error-message">Tipo é obrigatório</p>
            }
            </div>
            
            <!-- País de Origem -->
            <div>
            <label for="paisOrigem" class="label">País de Origem</label>
            <input
                type="text"
                id="paisOrigem"
                formControlName="paisOrigem"
                class="input"
                placeholder="Ex: Brasil"
            />
            </div>
            
            <!-- Ano de Formação -->
            <div>
            <label for="anoFormacao" class="label">Ano de Formação</label>
            <input
                type="number"
                id="anoFormacao"
                formControlName="anoFormacao"
                class="input"
                [class.input-error]="isFieldInvalid('anoFormacao')"
                placeholder="Ex: 1990"
                min="1900"
                [max]="currentYear"
            />
            @if (isFieldInvalid('anoFormacao')) {
                <p class="error-message">Ano deve estar entre 1900 e {{ currentYear }}</p>
            }
            </div>
            
            <!-- Biografia -->
            <div>
            <label for="biografia" class="label">Biografia</label>
            <textarea
                id="biografia"
                formControlName="biografia"
                class="input min-h-30"
                placeholder="Conte um pouco sobre o artista..."
                rows="4"
            ></textarea>
            </div>
            
            <!-- Actions -->
            <div class="flex justify-end gap-4 pt-4 border-t">
            <a routerLink="/artistas" class="btn btn-secondary">
                Cancelar
            </a>
            <button
                type="submit"
                class="btn btn-primary"
                [disabled]="saving()"
            >
                @if (saving()) {
                <app-loading size="sm" />
                <span class="ml-2">Salvando...</span>
                } @else {
                {{ isEditing() ? 'Salvar Alterações' : 'Cadastrar' }}
                }
            </button>
            </div>
        </form>
        </div>
    }
    </div>
</app-layout>'